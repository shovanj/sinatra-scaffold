#!/usr/bin/env ruby
require 'thor'

class Scaffold < Thor                                                # [1]
  include Thor::Actions

  GEM_PATH = File.expand_path('../../lib', __FILE__)

  map "-L" => :list                                               # [2]


  method_options :force => :boolean, :alias => :optional          # [4]
  #TODO: use format option in later verions
  method_options :format => :string, :alias => :optional          # [4]

  desc "setup_files", "copy layout an css files to sinatra app directories"    # [3]
  def setup_files(format = "haml")
    if File.exists?(destination_root+("/views/admin.haml")) && !options.force?
      puts "=================\nMatching files already exist!! \nuse --force to override\n====================="
    else
      FileUtils.copy(GEM_PATH+"/generators/templates/views/admin.haml.tt", destination_root+("/views/admin.haml"))
      FileUtils.copy(GEM_PATH+'/generators/templates/stylesheets/scaffold.css', destination_root+("/public/stylesheets/scaffold.css"))
      FileUtils.copy(GEM_PATH+'/generators/templates/javascripts/scaffold.js', destination_root+("/public/scripts/scaffold.js"))
      puts "Files copied successfully!"
    end
  end

end

Scaffold.start(ARGV)

